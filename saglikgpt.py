# -*- coding: utf-8 -*-
"""SaglikGPT.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/12i_sLwz45chwFgL2mpreDZtspWNDsYrB
"""

import streamlit as st
import requests

OPENROUTER_API_KEY = "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"

def sadeleÅŸtir_openrouter(metin):
    headers = {
        "Authorization": f"Bearer {OPENROUTER_API_KEY}",
        "Content-Type": "application/json"
    }

    data = {
        "model": "openai/gpt-3.5-turbo",   # AynÄ± model, sadece prompt deÄŸiÅŸti
        "messages": [
            {"role": "system", "content": "Sen bir tÄ±bbi sadeleÅŸtirme asistanÄ±sÄ±n."},
            {"role": "user", "content": f"Verilen tÄ±bbi metni hasta yakÄ±nÄ±na anlatÄ±r gibi TÃ¼rkÃ§e, aÃ§Ä±k ve sade bir dille aÃ§Ä±kla. TanÄ± koyma, tedavi Ã¶nerme.\n\nMetin:\n{metin}\n\nAÃ§Ä±klama:"}
        ],
        "temperature": 0.6,
        "max_tokens": 600
    }

    response = requests.post("https://openrouter.ai/api/v1/chat/completions", headers=headers, json=data)

    if response.status_code == 200:
        return response.json()['choices'][0]['message']['content']
    else:
        return f"Error: {response.text}"

# Streamlit Web ArayÃ¼zÃ¼
st.set_page_config(page_title="SaÄŸlÄ±kGPT", page_icon="ğŸ§ ")
st.title("ğŸ§  SaÄŸlÄ±kGPT - TÄ±bbi Metin SadeleÅŸtirici")

st.write("TÄ±bbi bir metni buraya yapÄ±ÅŸtÄ±rÄ±n, biz de size sade, anlaÅŸÄ±lÄ±r ve TÃ¼rkÃ§e bir aÃ§Ä±klama sunalÄ±m!")

# KullanÄ±cÄ±dan giriÅŸ alÄ±nÄ±r
tibbi_metin = st.text_area("ğŸ” TÄ±bbi Metin:", height=200)

# Butona basÄ±nca Ã§alÄ±ÅŸÄ±r
if st.button("SadeleÅŸtir"):
    if tibbi_metin.strip() == "":
        st.warning("LÃ¼tfen bir metin girin.")
    else:
        with st.spinner("SadeleÅŸtiriliyor..."):
            cevap = sadeleÅŸtir_openrouter(tibbi_metin)
        st.success("SadeleÅŸtirme TamamlandÄ±!")
        st.write("### ğŸ“„ SaÄŸlÄ±kGPT'nin AÃ§Ä±klamasÄ±:")
        st.write(cevap)
